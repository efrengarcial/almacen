
<div class="container-fluid">      
      <div class="row">   
         <div class="col-md-3">
            <h1 class="header">Productos</h1>
         </div>

         <form class="col-md-8 form-group col-md-offset-4" role="form">
             <div class="form-group col-md-6">
              <input type="text" name="buscar" ng-model="search" class="form-control" id="search" placeholder="Ingese Codigo, Nombre" maxlength="50" />
             </div>
             <div class="form-group col-md-1">
                  <button type="submit" class="btn btn-theme" ng-click="buscar()">
                     <i class="glyphicon glyphicon-search"></i>
                     Buscar
                  </button>
              </div>    
              <div class="form-group col-md-1">
                <button type="button" class="btn btn-primary btn-plus" ng-click="clearForm()">
                <i class="glyphicon glyphicon-plus"></i>
                  Nuevo
                </button>
              </div>        
        </form> 
      </div>
      <div class="row">
        <div class="col-md-2 col-md-offset-10 required-text">* Campos requeridos</div>
      </div> 
       <hr/>
      <form name="productoForm" ng-submit="submitForm(productoForm.$valid)" role="form" novalidate>
          <div class="row">  
            <div class="col-md-4 form-group required-field-block">
                <label class="col-md-3 control-label" for="nombre">Nombre</label>
                 <div class="col-md-9">
                      <input id="nombre"  ng-model="producto.Nombre" name="nombre" type="text" placeholder="Nombre" class="form-control" ng-minlength="3" ng-maxlength="50" ng-required="true">
                      <div class="required-icon" ng-mouseover="showMessage();">
                        <div class="text">*</div>
                      </div>
          						<div class="error-message" ng-messages="productoForm.nombre.$error" ng-if="interacted(productoForm.nombre) || productoForm.$submitted">
          						   <div class="error-message" ng-message="required">Debe ingresar un producto</div>		
                           <!-- then, incase the message is too short, show the message right after -->
                          <div class="error-message" ng-message="minlength">El nombre es demasiado corto...</div>

                          <!-- of if is too long then let us know --> 
                          <div class="error-message" ng-message="maxlength">El nombre es demasiado largo...</div>
          						</div>
                  </div>
            </div>
            <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="codigo">Código</label>
                  <div class="col-md-9">
                    <input id="codigo" ng-model="producto.Codigo" name="codigo" type="text" placeholder="Código" class="form-control" ng-maxlength="9" ng-required="true" numbers-only  ng-pattern="/^[0-9]{1,9}$/">
                      <div class="required-icon" ng-mouseover="showMessage();">
                       <div class="text">*</div>
                      </div>
                    <div class="error-message" ng-messages="productoForm.codigo.$error" ng-if="interacted(productoForm.codigo) || productoForm.$submitted">
                        <div class="error-message" ng-message="maxlength">El código es demasiado largo...</div>
                        <div class="error-message" ng-message="required">Debe ingresar un código</div>
                        <div class="error-message" ng-message="pattern">El código debe ser numérico</div>
                    </div>
                  </div>
            </div>
            <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="referencia">Referencia</label>
                  <div class="col-md-9">
                    <input id="referencia"  ng-model="producto.Referencia" name="referencia" type="text" placeholder="Referencia" class="form-control" ng-maxlength="50" ng-pattern="/^[a-zA-Z0-9]{1,50}$/" ng-required="true">
                      <div class="required-icon" ng-mouseover="showMessage();">
                        <div class="text">*</div>
                      </div>                    
                      <div class="error-message" ng-messages="productoForm.referencia.$error" ng-if="interacted(productoForm.referencia) || productoForm.$submitted">
                          <div class="error-message" ng-message="maxlength">La referencia es demasiado largo...</div>
                          <div class="error-message" ng-message="required">Debe ingresasr la Referencia</div>
                          <div class="error-message" ng-message="pattern">Sólo permite letras o números</div>
                      </div>                    
                  </div>
            </div>
          </div>
         
          <div class="row"> 
            <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="maximo">Máximo</label>
                   <div class="col-md-9">
                     <input id="maximo" ng-model="producto.Maximo" name="maximo" type="text" placeholder="Máximo" class="form-control" ng-maxlength="9" ng-required="true" numbers-only ng-pattern="/^[0-9]{1,9}$/">
                      <div class="required-icon" ng-mouseover="showMessage();">
                        <div class="text">*</div>
                      </div>                     
                     <div class="error-message" ng-messages="productoForm.maximo.$error" ng-if="interacted(productoForm.maximo) || productoForm.$submitted">
                      <div class="error-message" ng-message="maxlength">El máximo es demasiado largo...</div>
                      <div class="error-message" ng-message="required">Debe ingresar un valor para Máximo</div>
                      <div class="error-message" ng-message="pattern">El valor debe ser numérico</div>
                     </div>
                  </div>
            </div>
            <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="minimo">Mínimo</label>
                  <div class="col-md-9">
                    <input id="minimo" ng-model="producto.Minimo" name="minimo" type="text" placeholder="Mínimo" class="form-control" ng-maxlength="9" ng-required="true" numbers-only ng-pattern="/^[0-9]{1,9}$/">
                      <div class="required-icon" ng-mouseover="showMessage();">
                        <div class="text">*</div>
                      </div>                    
                    <div class="error-message" ng-messages="productoForm.minimo.$error" ng-if="interacted(productoForm.minimo)  || productoForm.$submitted">
                      <div class="error-message" ng-message="maxlength">El mínimo es demasiado largo...</div>
                      <div class="error-message" ng-message="required">Debe ingresar un valor para Mínimo</div>
                      <div class="error-message" ng-message="pattern">El valor deber ser numérico</div>
                    </div>
                  </div>
            </div>
            <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="referencia">Precio</label>
                  <div class="col-md-9">
                    <input id="precio" fcsa-number="{ preventInvalidInput: true}" ng-model="producto.Precio" name="precio" type="text" placeholder="$" class="form-control" maxlength="13" ng-required="true" ng-pattern="/^[0-9]{1,11}(\.[0-9]{1,2})?$/">
                      <div class="required-icon" ng-mouseover="showMessage();">
                        <div class="text">*</div>
                      </div>
                      <div class="error-message" ng-messages="productoForm.precio.$error" ng-if="interacted(productoForm.precio) || productoForm.$submitted">
                      <div class="error-message" ng-message="maxlength">La cantidad es demasiado grande....</div>
                      <div class="error-message" ng-message="required">Debe ingresar un valor para Precio</div>
                      <div class="error-message" ng-message="pattern">El valor solo debe tener 2 decimals</div>
                    </div>                    
                  </div>
            </div>
          </div>
          
          <div class="row">   
             <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="linea">Línea</label>
                     <div class="col-md-9">
                        <select id="linea" ng-model="producto.IdLinea" name="linea" class="form-control" ng-required="true" ng-options="linea.Id as linea.Nombre for linea in lineas"  ng-change="seleccionarLinea(producto.IdLinea)">
                            <option style="display:none" value="">Seleccione una Linea</option>
                        </select>
                        <div class="required-icon" ng-mouseover="showMessage();">
                          <div class="text">*</div>
                        </div>                        
                        <div class="error-message" ng-messages="productoForm.linea.$error" ng-if="interacted(productoForm.linea) || productoForm.$submitted">
                          <div class="error-message" ng-message="required">Debe ingresar un valor para Línea</div>
                        </div>                        
                    </div>
            </div>
            <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="grupo">Grupo</label>
                  <div class="col-md-9">
                    <select id="grupo" ng-model="producto.IdSubLinea" name="grupo" class="form-control" ng-required="true" ng-options="grupo.Id as grupo.Nombre for grupo in grupos" >
                         <option style="display:none" value="">Seleccione un Grupo</option>
                    </select>
                    <div class="required-icon" ng-mouseover="showMessage();">
                      <div class="text">*</div>
                    </div>                    
                        <div class="error-message" ng-messages="productoForm.grupo.$error" ng-if="interacted(productoForm.grupo) || productoForm.$submitted">
                          <div class="error-message" ng-message="required">Debe ingresar un valor para Grupo</div>
                        </div>                    
                  </div>
            </div>

             <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="unidad">Unidad</label>
                  <div class="col-md-9">
                     <select id="unidad" ng-model="producto.IdMedida" name="unidad" class="form-control" ng-required="true" ng-options="medida.Id as medida.Nombre for medida in medidas" >
                        <option style="display:none" value="">Seleccione una Unidad</option>
                    </select>
                    <div class="required-icon" ng-mouseover="showMessage();">
                      <div class="text">*</div>
                    </div>                    
                        <div class="error-message" ng-messages="productoForm.unidad.$error" ng-if="interacted(productoForm.unidad) || productoForm.$submitted">
                          <div class="error-message" ng-message="required">Debe ingresar un valor para Unidad </div>
                        </div>                     
                  </div>
            </div>

          </div>
          
          <div class="row">   
            <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="ubicacion">Ubicación</label>
                  <div class="col-md-9">
                    <input id="ubicacion" ng-model="producto.Ubicacion" name="ubicacion" type="text" placeholder="Ubicación" class="form-control" ng-maxlength="50" ng-required="true">
                      <div class="required-icon" ng-mouseover="showMessage();">
                        <div class="text">*</div>
                      </div>
                      <div class="error-message" ng-messages="productoForm.ubicacion.$error" ng-if="interacted(productoForm.ubicacion) || productoForm.$submitted">
                        <div class="error-message" ng-message="maxlength">El valor es demasiado largo</div>
                        <div class="error-message" ng-message="required">Debe ingresar una Ubicación</div>
                      </div>                     
                  </div>
            </div>
             <div class="col-md-4 form-group required-field-block">
                  <label class="col-md-3 control-label" for="iva">IVA</label>
                   <div class="col-md-9">
                     <input id="iva" fcsa-number="{ preventInvalidInput: true }" ng-model="producto.Iva" name="iva" type="text" placeholder="IVA" class="form-control" maxlength="5" ng-required="true" ng-pattern="/^[0-9]{1,2}(\.[0-9]{1,2})?$/">
                      <div class="required-icon" ng-mouseover="showMessage();">
                        <div class="text">*</div>
                      </div>
                      <div class="error-message" ng-messages="productoForm.iva.$error" ng-if="interacted(productoForm.iva) || productoForm.$submitted">
                        <div class="error-message" ng-message="maxlength">El valor es demasiado largo</div>
                        <div class="error-message" ng-message="required">Debe ingresar el IVA</div>
                        <div class="error-message" ng-message="pattern">IVA debe tener tener formato 00.00</div>
                      </div>                      
                  </div>
            </div>


            <div class="col-md-4 form-group">
                  <label class="col-md-3 control-label" for="verificar">Descripción</label>
                  <div class="col-md-9">
                      <textarea rows="3" ng-model="producto.Descripcion" class="form-control" placeholder="Descripción"></textarea>
                  </div>
            </div>
 
          </div>  
          
         <div class="row">
          <div class="col-md-4 col-md-offset-5">
              <button type="button" class="btn btn-danger" ng-click="clearForm()" style="width: 100px;">
                <i class="glyphicon glyphicon-remove"></i>
                Cancelar
              </button>
               
                <button type="submit" class="btn btn-success" >
                   <span class="glyphicon glyphicon-ok" style="vertical-align:middle"></span> Aceptar
               </button>                
          </div>
        </div>
                 
      </form>

      <br/>
      <!-- Table to show data -->
      <div class="grid">
        
        <!-- Binds the grid component to be displayed. -->
        <div class="gridStyle" ng-grid="gridOptions" ng-show="allData.length > 0"></div>
      
        <!--  Bind the pagination component to be displayed. -->
        <pagination direction-links="true" boundary-links="true" ng-show="allData.length > 0"
                total-items="pagingOptions.totalServerItems" items-per-page="pagingOptions.pageSize"
                ng-model="pagingOptions.currentPage" ng-change="refreshGrid()">
        </pagination>

      </div>
      <!-- end table-->
   
 </div><!-- /container -->